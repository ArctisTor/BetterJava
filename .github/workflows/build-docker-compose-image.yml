name: Start Full Stack – JAR + BetterFront Image

on:
  workflow_dispatch:
  push:
    branches: [ main ]

permissions:
  contents: read
  actions: read

jobs:
  prepare-and-run:
    runs-on: ubuntu-latest

    steps:
      # ──────────────────────────────
      # 1. Get latest successful JAR run ID
      # ──────────────────────────────
      - name: Get latest Build JAR run ID
        id: jar-run
        run: |
          RUN_ID=$(gh run list \
            --repo ${{ github.repository }} \
            --workflow "Build JAR on Master Merge" \
            --branch master \
            --status success \
            --limit 1 \
            --json databaseId \
            --jq '.[0].databaseId // empty')
          
          if [[ "$RUN_ID" == "empty" || -z "$RUN_ID" ]]; then
            echo "No successful JAR build found!"
            exit 1
          fi
          
          echo "Found JAR run ID: $RUN_ID"
          echo "run_id=$RUN_ID" >> $GITHUB_OUTPUT

      # ──────────────────────────────
      # 2. Download the JAR (
