name: Cache latest BetterFront Docker image

on:
  repository_dispatch:
    types: [betterfront-built]
  workflow_dispatch:   

jobs:
  cache:
    runs-on: ubuntu-latest
    steps:
      - name: Download artifact from BetterFront
        uses: dawidd6/action-download-artifact@v6
        with:
          github_token: ${{ secrets.GH_PAT }}  # Your existing secret
          repo: ArctisTor/BetterFront
          workflow: build-nodejs-server.yml
          name: betterfront-docker-image
          path: downloaded

      - name: Re-upload as local artifact
        uses: actions/upload-artifact@v4
        with:
          name: betterfront-docker-image
          path: downloaded/betterfront-latest.tar
          retention-days: 90
          overwrite: true
